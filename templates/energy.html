<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <title>US Energy Consumption</title>
    <link rel="stylesheet" href="/css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="application/javascript">
        // `energy_type` and object of consumption per year per state => set these variables equal to appropriate value
        //   * these variables will be defined and accessible from any script loaded after this one
        var energy_type = '{{{ENERGY_TYPE}}}';
        var energy_counts = {{{ENERGY_COUNTS}}}; // dictionary of arrays (e.g. {AK: [...], AL: [...], AR: [...], ...})
    </script>
</head>
<body>
    <!-- create template here -->
    <div class="navigation">
        <div class="dropdown">
            <button class="dropbtn">Year</button>
            <ul class="dropdown-content" id="dropdown-year">
                
            </ul>
            <script>
                let element = document.getElementById("dropdown-year");
                for(i=1960; i<2019; i++){
                    let new_li = document.createElement("li");
                    let new_link = document.createElement("a")
                    new_link.textContent = i;
                    new_link.href = "/year/" + i;
                    new_li.appendChild(new_link)
                    element.appendChild(new_li);
                }
            </script>
        </div>
        <div class="dropdown">
            <button class="dropbtn">State</button>
            <ul class="dropdown-content" id="dropdown-state">
        
            </ul>
            <script>
                let states = ["Alaska", "Alabama", "Arkansas", "Arizona", "California", "Colorado", "Connecticut", "District of Columbia", "Delaware", "Florida", "Georgia", "Hawaii", "Iowa", "Idaho", "Illinois", "Indiana", "Kansas", "Kentucky", "Louisiana", "Massachusetts", "Maryland", "Maine", "Michigan", "Minnesota", "Missouri", "Mississippi", "Montana", "North Carolina", "North Dakota", "Nebraska", "New Hampshire", "New Jersey", "New Mexico", "Nevada", "New York", "Ohio", "Oklahoma", "Oregon", "Pennsylvania", "Rhode Island", "South Carolina", "South Dakota", "Tennessee", "Texas", "Utah", "Virginia",  "Vermont", "Washington", "Wisconsin", "West Virginia", "Wyoming"]
                let states_abbrev = [ "AK","AL","AR","AZ","CA","CO","CT","DC","DE","FL","GA","HI","IA","ID","IL","IN","KS","KY","LA","MA","MD","ME","MI","MN","MO","MS","MT","NC","ND","NE","NH","NJ","NM","NV","NY","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VA","VT","WA","WI","WV","WY"]
                let element_state = document.getElementById("dropdown-state");
                for(i=0; i<51; i++){
                    let new_li = document.createElement("li");
                    let new_link = document.createElement("a")
                    new_link.textContent = states[i];
                    new_link.href = "/state/" + states_abbrev[i];
                    new_li.appendChild(new_link)
                    element_state.appendChild(new_li);
                }
            </script>
        </div>
        <div class="dropdown">
            <button class="dropbtn">Energy Source</button>
            <div class="dropdown-content">
                <a href="/energy/coal">Coal</a>
                <a href="/energy/natural_gas">Natural Gas</a>
                <a href="/energy/nuclear">Nuclear</a>
                <a href="/energy/petroleum">Petroleum</a>
                <a href="/energy/renewable">Renewable</a>
            </div>
        </div>
    </div>


    <div class="container" >
        <canvas id="myChart"></canvas>
    </div>

    <script type="application/javascript">
        //let year = 2001;
        let myChart = document.getElementById('myChart').getContext('2d');
        let massPopChart = new Chart(myChart, {
            type: 'line', // bar, horizontalBar, pie, line, doughnut, radar, polarArea
            data: {
                labels:[{{{YEAR_LIST}}}],
                datasets:[{
                    label:[
                    ],
                }]
            },
            options: {
                maintainAspectRatio: false,
                plugins: {
                    title: {
                        display: true, 
                        text: 'Total Energy Consumption'
                    }
                }
            }
        });

        console.log(energy_counts.AK)
        for( let i = 0; i<energy_counts.length; i++){
            massPopChart.data.label.push(energy_counts[i].keys());
            console.log(energy_counts[i].keys())
        }
        

    </script>


    <table>

        <tr>
            {{{HEADER}}}
        </tr>
        <tr>
            {{{YEARS}}}
        </tr>
    </table>



</body>
</html>
